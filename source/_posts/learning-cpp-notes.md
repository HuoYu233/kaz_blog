---
title: 从0开始的Cpp学习笔记
mathjax: true
date: 20235/4/26 20:46:25
img: https://i2.hdslb.com/bfs/archive/6487769f0e49718a24c293df29bd840be0ca2e9c.png
excerpt: RT
---
windows: vs开发桌面c++，安装略

CS106L：

编译语言&解释语言

C++是静态类型语言，变量类型不可变。

using关键词解决很长的类型表达，auto自动选择类型，仍然是静态类型

# C++是如何工作的？

源代码（.cpp和.h文件）-> 预处理（处理#开头指令，包括头文件展开，宏替换，条件编译等，生成.i或.ii文件） -> 编译（将预处理文件转化成机器可读的目标文件，先变成汇编文件.s，再变成目标文件.o或.obj） -> 链接（合并目标文件和库，生成可执行文件）

## 编译器如何工作？

一个cpp文件通常是一个翻译单元（有时是多个），每个翻译单元单独编译，生成一个obj目标文件

首先进行预处理，处理预处理语句（include，if endif ，pragma）

- include：把头文件的内容直接复制到当前文件位置
- if-endif：把符合条件的代码选择上

然后将预处理后的代码（.i文件）编译成机器语言，即.obj文件里都是十六进制指令（中间先汇编成汇编语言）

## 链接如何工作？

将每个obj文件合并起来，注意合并后必须要有入口函数（main），不然会在链接阶段报错（LNK，编译阶段是C），

如果要使用（在文件中定义了调用）其他文件的函数，需要在main函数的文件里面定义函数，不然在链接阶段会报错

如果有两个一样的函数（返回值，参数，名称），链接器就不知道你要调用的是哪一个函数，会报错

（例如两个文件include同一个库文件，其中的库函数就一样）

